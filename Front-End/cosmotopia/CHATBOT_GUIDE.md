# HÆ°á»›ng dáº«n sá»­ dá»¥ng Chatbot Cosmotopia

## Tá»•ng quan
Chatbot Cosmotopia AI lÃ  trá»£ lÃ½ thÃ´ng minh giÃºp báº¡n tÃ¬m hiá»ƒu vÃ  lá»±a chá»n sáº£n pháº©m lÃ m Ä‘áº¹p phÃ¹ há»£p. Chatbot cÃ³ kháº£ nÄƒng:

1. **Hiá»ƒu vÃ  phÃ¢n tÃ­ch nhu cáº§u**: Nháº­n diá»‡n loáº¡i da, má»¥c Ä‘Ã­ch sá»­ dá»¥ng tá»« cÃ¢u há»i cá»§a báº¡n
2. **Gá»£i Ã½ sáº£n pháº©m**: Hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m phÃ¹ há»£p tá»« cÆ¡ sá»Ÿ dá»¯ liá»‡u Cosmotopia
3. **TÃ¬m kiáº¿m má»Ÿ rá»™ng**: TÃ¬m thÃªm thÃ´ng tin trÃªn Google khi Ä‘Æ°á»£c yÃªu cáº§u
4. **TÃ¬m sáº£n pháº©m tÆ°Æ¡ng tá»±**: Sá»­ dá»¥ng Google Custom Search API Ä‘á»ƒ tÃ¬m sáº£n pháº©m thay tháº¿
5. **Tráº£ lá»i Ä‘a dáº¡ng**: Xá»­ lÃ½ cáº£ cÃ¢u há»i vá» sáº£n pháº©m vÃ  cÃ¡c cÃ¢u há»i chung khÃ¡c

## CÃ¡c tÃ­nh nÄƒng chÃ­nh

### 1. TÆ° váº¥n sáº£n pháº©m thÃ´ng minh
- **Nháº­n diá»‡n tá»« khÃ³a**: Tá»± Ä‘á»™ng phÃ¡t hiá»‡n khi báº¡n há»i vá» sáº£n pháº©m
- **PhÃ¢n loáº¡i chÃ­nh xÃ¡c**: PhÃ¢n biá»‡t skincare, makeup, haircare, nÆ°á»›c hoa
- **Lá»c theo tiÃªu chÃ­**: Xem xÃ©t loáº¡i da vÃ  má»¥c Ä‘Ã­ch sá»­ dá»¥ng

### 2. Hiá»ƒn thá»‹ sáº£n pháº©m trá»±c quan
- Danh sÃ¡ch sáº£n pháº©m dáº¡ng horizontal scroll
- HÃ¬nh áº£nh, tÃªn, giÃ¡, thÃ´ng tin thÆ°Æ¡ng hiá»‡u
- Nháº¥n Ä‘á»ƒ xem chi tiáº¿t vÃ  mua hÃ ng

### 3. TÃ¬m kiáº¿m má»Ÿ rá»™ng vá»›i Google Search
- TÃ¬m thÃªm thÃ´ng tin khi Ä‘Æ°á»£c yÃªu cáº§u
- Káº¿t quáº£ tá»« cÃ¡c nguá»“n uy tÃ­n
- Lá»c ná»™i dung phÃ¹ há»£p vá»›i beauty/skincare

### 4. ğŸ†• TÃ¬m sáº£n pháº©m tÆ°Æ¡ng tá»± vá»›i Google Custom Search
- TÃ¬m sáº£n pháº©m thay tháº¿ tá»« cÃ¡c thÆ°Æ¡ng hiá»‡u khÃ¡c
- ÄÃ¡nh giÃ¡ Ä‘á»™ tÆ°Æ¡ng tá»± vÃ  Ä‘á»™ tin cáº­y nguá»“n
- Hiá»ƒn thá»‹ thÃ´ng tin chi tiáº¿t vá»›i link Ä‘áº¿n nguá»“n gá»‘c
- PhÃ¢n loáº¡i nguá»“n Ä‘Ã¡ng tin cáº­y vs thÃ´ng tin tham kháº£o

## CÃ¡ch sá»­ dá»¥ng

### Há»i vá» sáº£n pháº©m
```
VÃ­ dá»¥ cÃ¢u há»i:
- "Giá»›i thiá»‡u cÃ¡c sáº£n pháº©m vá» skincare"
- "TÃ´i cÃ³ da khÃ´, cáº§n kem dÆ°á»¡ng áº©m"
- "Sáº£n pháº©m chá»‘ng lÃ£o hÃ³a cho da nháº¡y cáº£m"
- "Serum tá»‘t cho da dáº§u"
```

### TÃ¬m thÃªm thÃ´ng tin
Sau khi xem sáº£n pháº©m, báº¡n cÃ³ thá»ƒ há»i:
```
- "cho tÃ´i thÃªm thÃ´ng tin"
- "tÃ¬m hiá»ƒu thÃªm"
- "search thÃªm"
```

### ğŸ†• TÃ¬m sáº£n pháº©m tÆ°Æ¡ng tá»±
Sau khi xem danh sÃ¡ch sáº£n pháº©m, báº¡n cÃ³ thá»ƒ há»i:
```
- "tÃ¬m sáº£n pháº©m tÆ°Æ¡ng tá»±"
- "cÃ³ sáº£n pháº©m thay tháº¿ nÃ o khÃ´ng"
- "sáº£n pháº©m giá»‘ng nhÆ° váº­y"
- "alternative products"
```

## Tá»« khÃ³a Ä‘Æ°á»£c há»— trá»£

### Loáº¡i sáº£n pháº©m
- **Skincare**: kem, serum, toner, cleanser, moisturizer, dÆ°á»¡ng áº©m
- **Makeup**: son, pháº¥n, mascara, foundation, trang Ä‘iá»ƒm
- **Haircare**: gá»™i, xáº£, dÆ°á»¡ng tÃ³c, shampoo, conditioner
- **Fragrance**: nÆ°á»›c hoa, perfume

### Loáº¡i da
- Da khÃ´, da dáº§u, da há»—n há»£p, da nháº¡y cáº£m, da thÆ°á»ng

### Má»¥c Ä‘Ã­ch
- Chá»‘ng lÃ£o hÃ³a, dÆ°á»¡ng áº©m, lÃ m tráº¯ng, chá»‘ng náº¯ng, trá»‹ má»¥n, lÃ m sáº¡ch

### ğŸ†• YÃªu cáº§u sáº£n pháº©m tÆ°Æ¡ng tá»±
- tÆ°Æ¡ng tá»±, giá»‘ng, thay tháº¿, alternative, similar, comparable

## Workflow sá»­ dá»¥ng hoÃ n chá»‰nh

1. **Há»i vá» sáº£n pháº©m** â†’ Hiá»ƒn thá»‹ sáº£n pháº©m tá»« DB + gá»£i Ã½
2. **"cho tÃ´i thÃªm thÃ´ng tin"** â†’ TÃ¬m kiáº¿m thÃ´ng tin trÃªn Google
3. **"tÃ¬m sáº£n pháº©m tÆ°Æ¡ng tá»±"** â†’ Hiá»ƒn thá»‹ sáº£n pháº©m thay tháº¿ tá»« Google Custom Search

## ğŸ†• TÃ­nh nÄƒng Google Custom Search

### Cáº¥u hÃ¬nh API
Äá»ƒ sá»­ dá»¥ng Google Custom Search, cáº§n thiáº¿t láº­p:

1. **Táº¡o API Key**: 
   - Truy cáº­p [Google Cloud Console](https://console.cloud.google.com/)
   - Táº¡o project má»›i hoáº·c chá»n project hiá»‡n cÃ³
   - Enable Custom Search JSON API
   - Táº¡o API key trong Credentials

2. **Táº¡o Custom Search Engine**:
   - Truy cáº­p [Programmable Search Engine](https://programmablesearchengine.google.com/)
   - Táº¡o search engine má»›i
   - Cáº¥u hÃ¬nh Ä‘á»ƒ tÃ¬m kiáº¿m toÃ n web hoáº·c cÃ¡c site cá»¥ thá»ƒ
   - Láº¥y Search Engine ID

3. **Cáº­p nháº­t code**:
   ```dart
   // Trong google_custom_search_service.dart
   static const String _apiKey = 'YOUR_ACTUAL_API_KEY';
   static const String _searchEngineId = 'YOUR_SEARCH_ENGINE_ID';
   ```

### CÃ¡c nguá»“n Ä‘Ã¡ng tin cáº­y
- âœ… Sephora, Ulta, Dermstore, Beautylish
- âœ… Allure, Byrdie, Harper's Bazaar, Elle
- ğŸ”¸ CÃ¡c nguá»“n khÃ¡c (thÃ´ng tin tham kháº£o)

### Query Optimization
Há»‡ thá»‘ng tá»± Ä‘á»™ng:
- Loáº¡i bá» tÃªn thÆ°Æ¡ng hiá»‡u Ä‘á»ƒ tÃ¬m sáº£n pháº©m tá»« brand khÃ¡c
- ThÃªm tá»« khÃ³a cháº¥t lÆ°á»£ng: "review", "best", "top rated"
- Loáº¡i trá»« cÃ¡c site khÃ´ng mong muá»‘n: YouTube, TikTok, social media
- TÃ­nh toÃ¡n Ä‘á»™ tÆ°Æ¡ng tá»± vÃ  sáº¯p xáº¿p káº¿t quáº£

## LÆ°u Ã½ ká»¹ thuáº­t

### Dependencies má»›i
```yaml
dependencies:
  http: ^1.2.2          # Cho API calls
  url_launcher: ^6.3.1  # Cho viá»‡c má»Ÿ link external
```

### API Limitations
- **Google Custom Search**: 100 queries/day (free tier)
- **Rate limiting**: Tá»‘i Ä‘a 10 queries/minute
- **Fallback**: Sá»­ dá»¥ng káº¿t quáº£ dá»± phÃ²ng khi API khÃ´ng kháº£ dá»¥ng

### Performance Optimization
- Cache káº¿t quáº£ tÃ¬m kiáº¿m
- Limit sá»‘ lÆ°á»£ng káº¿t quáº£ (6 products)
- Async processing Ä‘á»ƒ khÃ´ng block UI
- Graceful degradation khi API fail

## Troubleshooting

### Google Custom Search khÃ´ng hoáº¡t Ä‘á»™ng
```
âŒ API Key khÃ´ng há»£p lá»‡ hoáº·c Ä‘Ã£ háº¿t quota
```
**Giáº£i phÃ¡p**:
1. Kiá»ƒm tra API key cÃ³ Ä‘Ãºng vÃ  cÃ²n quota
2. Äáº£m báº£o Custom Search JSON API Ä‘Ã£ Ä‘Æ°á»£c enable
3. Xem log Ä‘á»ƒ debug error cá»¥ thá»ƒ

### Káº¿t quáº£ khÃ´ng chÃ­nh xÃ¡c
**Cáº£i thiá»‡n**:
1. Äiá»u chá»‰nh query building logic
2. ThÃªm/sá»­a trusted domains list
3. Cáº£i thiá»‡n similarity calculation
4. Filter relevance tá»‘t hÆ¡n

### UI/UX Issues
**Xá»­ lÃ½**:
1. Kiá»ƒm tra import url_launcher
2. Test external link opening
3. Responsive design cho different screen sizes
4. Loading states vÃ  error handling

## File Structure má»›i

```
lib/
â”œâ”€â”€ backend/services/
â”‚   â”œâ”€â”€ chatbot_service.dart          # Core chatbot logic + enhanced
â”‚   â”œâ”€â”€ google_search_service.dart    # Basic Google search
â”‚   â””â”€â”€ google_custom_search_service.dart  # ğŸ†• Similar products search
â”œâ”€â”€ all_component/
â”‚   â”œâ”€â”€ chat_product_list/           # Database products display
â”‚   â””â”€â”€ similar_products_list/       # ğŸ†• Google search results display
â””â”€â”€ chat/chat_page/                  # Main chat interface
```

Chatbot giá» Ä‘Ã¢y cÃ³ thá»ƒ giÃºp báº¡n tÃ¬m cáº£ sáº£n pháº©m tá»« Cosmotopia láº«n sáº£n pháº©m tÆ°Æ¡ng tá»± tá»« toÃ n tháº¿ giá»›i! 